{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}}}},"/users":{"post":{"operationId":"UserController_create","summary":"Create user (ADMIN only)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"User created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"tags":["users"]},"get":{"operationId":"UserController_findAll","summary":"List all users (ADMIN only)","parameters":[],"responses":{"200":{"description":"List of users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"tags":["users"]}},"/users/{id}":{"get":{"operationId":"UserController_findOne","summary":"Get a user by id (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"tags":["users"]},"patch":{"operationId":"UserController_update","summary":"Update a user (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":""}},"tags":["users"]},"delete":{"operationId":"UserController_remove","summary":"Delete a user (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["users"]}},"/areas":{"post":{"operationId":"AreaController_create","summary":"Create area","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAreaDto"}}}},"responses":{"201":{"description":"Area created"}},"tags":["areas"]},"get":{"operationId":"AreaController_findAll","summary":"List all areas","parameters":[],"responses":{"200":{"description":"List of areas"}},"tags":["areas"]}},"/areas/{id}":{"get":{"operationId":"AreaController_findOne","summary":"Get an area by id","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Area found"}},"tags":["areas"]},"patch":{"operationId":"AreaController_update","summary":"Update an area","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAreaDto"}}}},"responses":{"200":{"description":""}},"tags":["areas"]},"delete":{"operationId":"AreaController_remove","summary":"Delete an area","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["areas"]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"Login with email & password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/register":{"post":{"operationId":"AuthController_register","summary":"Register a new user (ADMIN only)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":""}},"tags":["auth"]}},"/auth/profile":{"get":{"operationId":"AuthController_profile","summary":"Get profile of logged in user","parameters":[],"responses":{"200":{"description":""}},"tags":["auth"]}},"/tramites/register":{"post":{"operationId":"TramiteController_create","summary":"Register a new tramite","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTramiteDto"}}}},"responses":{"201":{"description":""}},"tags":["tramites"]}},"/tramites/{id}/derivar":{"post":{"operationId":"TramiteController_derivar","summary":"Derivar tramite to another area","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"toAreaId":{"type":"number"},"userId":{"type":"number"}}}}}},"responses":{"201":{"description":""}},"tags":["tramites"]}},"/tramites/{id}/finalize":{"post":{"operationId":"TramiteController_finalize","summary":"Finalize a tramite","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"userId":{"type":"number"}}}}}},"responses":{"201":{"description":""}},"tags":["tramites"]}},"/tramites/{id}/observe":{"post":{"operationId":"TramiteController_observe","summary":"Observe a tramite with a comment","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"userId":{"type":"number"},"comment":{"type":"string"}}}}}},"responses":{"201":{"description":""}},"tags":["tramites"]}},"/tramites":{"get":{"operationId":"TramiteController_findAll","summary":"List tramites with filters","parameters":[{"name":"areaId","required":false,"in":"query","schema":{"type":"number"}},{"name":"estado","required":false,"in":"query","schema":{"type":"string"}},{"name":"fechaDesde","required":false,"in":"query","schema":{"type":"string"}},{"name":"fechaHasta","required":false,"in":"query","schema":{"type":"string"}},{"name":"cut","required":false,"in":"query","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"offset","required":false,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["tramites"]}},"/tramites/{id}":{"get":{"operationId":"TramiteController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["tramites"]},"patch":{"operationId":"TramiteController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTramiteDto"}}}},"responses":{"200":{"description":""}},"tags":["tramites"]},"delete":{"operationId":"TramiteController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["tramites"]}},"/documentos/{tramiteId}":{"post":{"operationId":"DocumentosController_upload","summary":"Upload a document for a tramite","parameters":[{"name":"tramiteId","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"},"subido_por_id":{"type":"number"}}}}}},"responses":{"201":{"description":""}},"tags":["documentos"]}},"/historial/{tramiteId}":{"get":{"operationId":"HistorialController_findByTramite","summary":"Get historial entries for a tramite","parameters":[{"name":"tramiteId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"List of historial entries"}},"tags":["historial"]}},"/configuraciones":{"post":{"operationId":"ConfiguracionController_create","summary":"Create configuration (ADMIN only)","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateConfiguracionDto"}}}},"responses":{"201":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]},"get":{"operationId":"ConfiguracionController_findAll","summary":"List configurations (ADMIN only)","parameters":[],"responses":{"200":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]}},"/configuraciones/export":{"get":{"operationId":"ConfiguracionController_exportToCsv","summary":"Export configurations to spreadsheet (CSV)","parameters":[],"responses":{"200":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]}},"/configuraciones/{id}":{"get":{"operationId":"ConfiguracionController_findOne","summary":"Get configuration by id (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]},"patch":{"operationId":"ConfiguracionController_update","summary":"Update configuration (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateConfiguracionDto"}}}},"responses":{"200":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]},"delete":{"operationId":"ConfiguracionController_remove","summary":"Delete configuration (ADMIN only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["configuraciones"],"security":[{"bearer":[]}]}},"/reportes/tramites-por-area":{"get":{"operationId":"ReportesController_tramitesPorArea","summary":"Count of tramites per area grouped by estado","parameters":[],"responses":{"200":{"description":""}},"tags":["reportes"]}},"/reportes/tramites-por-usuario":{"get":{"operationId":"ReportesController_tramitesPorUsuario","summary":"Tramites created per user and participated count","parameters":[],"responses":{"200":{"description":""}},"tags":["reportes"]}},"/reportes/tiempos-respuesta":{"get":{"operationId":"ReportesController_tiemposRespuesta","summary":"Stats for time from RECIBIDO to FINALIZADO","parameters":[],"responses":{"200":{"description":""}},"tags":["reportes"]}}},"info":{"title":"Sistema de Trámite Documentario API","description":"Backend for the Tramite Documentario system built with NestJS and TypeORM.","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"JWT":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"CreateUserDto":{"type":"object","properties":{"nombre":{"type":"string","example":"Juan","description":"Nombre del usuario"},"apellido":{"type":"string","example":"Perez","description":"Apellido del usuario"},"email":{"type":"string","example":"juan.perez@example.com","description":"Correo electrónico del usuario"},"password":{"type":"string","example":"StrongP@ssw0rd","description":"Contraseña (solo para creación)","writeOnly":true},"rol":{"type":"string","enum":["ADMIN","MESA_PARTES","AREA","AUDITOR"],"description":"Rol del usuario"},"area_id":{"type":"number","description":"ID del área asociada (opcional)"}},"required":["nombre","apellido","email","password"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"number","example":1},"nombre":{"type":"string","example":"Juan"},"apellido":{"type":"string","example":"Perez"},"email":{"type":"string","example":"juan.perez@example.com"},"rol":{"type":"string","enum":["ADMIN","MESA_PARTES","AREA","AUDITOR"]},"area":{"type":"object","example":null,"description":"Área asociada (si aplica)"},"created_at":{"type":"string","example":"2025-01-01T12:00:00Z"},"updated_at":{"type":"string","example":"2025-01-01T12:00:00Z"}},"required":["id","nombre","apellido","email","rol","area","created_at","updated_at"]},"UpdateUserDto":{"type":"object","properties":{}},"CreateAreaDto":{"type":"object","properties":{"nombre":{"type":"string","example":"Area de Finanzas","description":"Nombre del área"},"descripcion":{"type":"string","example":"Responsable de procesos financieros","description":"Descripción de la área (opcional)"}},"required":["nombre"]},"UpdateAreaDto":{"type":"object","properties":{}},"CreateTramiteDto":{"type":"object","properties":{"cut":{"type":"string","example":"CUT-2025-0001","description":"Código único de tramitación (CUT) del documento"},"asunto":{"type":"string","example":"Solicitud de licencia","description":"Asunto o título del trámite"},"tipoDocumento":{"type":"string","example":"Oficio","description":"Tipo de documento (Oficio, Memorando, Informe, etc.)"},"folios":{"type":"number","example":3,"description":"Número de folios del documento"},"estado":{"type":"string","enum":["RECIBIDO","EN_PROCESO","OBSERVADO","FINALIZADO"],"description":"Estado inicial del trámite (opcional)"},"remitenteTipo":{"type":"string","example":"Persona natural","description":"Tipo de remitente"},"remitenteDniRuc":{"type":"string","example":"12345678","description":"DNI o RUC del remitente"},"remitenteNombre":{"type":"string","example":"María López","description":"Nombre del remitente"},"remitenteDireccion":{"type":"string","example":"Av. Siempre Viva 123","description":"Dirección del remitente"},"remitenteTelefono":{"type":"string","example":"+51987654321","description":"Teléfono del remitente"},"remitenteEmail":{"type":"string","example":"remitente@example.com","description":"Correo electrónico del remitente"},"fechaCreacion":{"type":"string","example":"2025-01-01T12:00:00Z","description":"Fecha de creación (opcional). Si no se envía, se asigna automáticamente."},"fechaFinalizacion":{"type":"string","example":"2025-01-10T15:30:00Z","description":"Fecha de finalización (opcional)"},"area_actual_id":{"type":"number","description":"ID del área actual responsable del trámite"},"creado_por_id":{"type":"number","description":"ID del usuario que creó el trámite"}},"required":["cut","asunto","tipoDocumento"]},"UpdateTramiteDto":{"type":"object","properties":{}},"CreateConfiguracionDto":{"type":"object","properties":{"clave":{"type":"string","example":"max_adjuntos","description":"Clave identificadora de la configuración"},"valor":{"type":"string","example":"10","description":"Valor asociado a la clave de configuración"}},"required":["clave","valor"]},"UpdateConfiguracionDto":{"type":"object","properties":{}}}}}